C51 COMPILER V9.56.0.0   DIS                                                               01/03/2018 16:08:18 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE DIS
OBJECT MODULE PLACED IN .\Objects\dis.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE dis.c OPTIMIZE(8,SPEED) BROWSE INCDIR(D:\Keil_v5\C51) DEBUG OBJECTEXTEND
                    - PRINT(.\Listings\dis.lst) TABS(2) OBJECT(.\Objects\dis.obj)

line level    source

   1          #include"dis.h"
   2          
   3          /*led点阵显示数字函数*/
   4          
   5          //---全局变量声明--//
   6          ulong column;   //点阵列
   7          ulong row;      //点阵行
   8          ulong dt;
   9          
  10          //--点阵显示数组--//
  11          uchar code tab10[] = 
  12          {0x00, 0x01, 0x00, 0x02, 0x00, 0x04, 0x00, 0x08,
  13           0x00, 0x10, 0x00, 0x20, 0x00, 0x40, 0x00, 0x80,
  14           0x01, 0x00, 0x02, 0x00, 0x04, 0x00, 0x08, 0x00,
  15           0x10, 0x00, 0x20, 0x00, 0x40, 0x00, 0x80, 0x00}; 
  16          
  17          
  18          uint code tab[10][32]=
  19          {
  20            {0, 0, 0, 0, 0, 0, 24, 24, 36, 36, 66, 66, 66, 66, 66, 66, 66, 66,
  21          66, 66, 66, 66, 66, 66, 36, 36, 24, 24, 0, 0, 0, 0},//--00字模--//
  22            
  23            {0, 0, 0, 0, 0, 0, 24, 8, 36, 14, 66, 8, 66, 8, 66, 8, 66, 8, 66,
  24          8, 66, 8, 66, 8, 36, 8, 24, 62, 0, 0, 0, 0},//--01字模--//
  25              
  26            {0, 0, 0, 0, 0, 0, 24, 60, 36, 66, 66, 66, 66, 66, 66, 32, 66,
  27           32, 66, 16, 66, 8, 66, 4, 36, 66, 24, 126, 0, 0, 0, 0},//--02字模--//
  28              
  29            {0, 0, 0, 0, 0, 0, 24, 60, 36, 66, 66, 66, 66, 32, 66, 24, 66,
  30           32, 66, 64, 66, 64, 66, 66, 36, 34, 24, 28, 0, 0, 0, 0},//--03字模--//
  31              
  32            {0, 0, 0, 0, 0, 0, 24, 32, 36, 48, 66, 40, 66, 36, 66, 36, 66,
  33          34, 66, 34, 66, 126, 66, 32, 36, 32, 24, 120, 0, 0, 0, 0},//--04字模--//
  34              
  35            {0, 0, 0, 0, 0, 0, 24, 126, 36, 2, 66, 2, 66, 2, 66, 26, 66,
  36           38, 66, 64, 66, 64, 66, 66, 36, 34, 24, 28, 0, 0, 0, 0},//--05字模--//
  37              
  38            {0, 0, 0, 0, 0, 0, 24, 56, 36, 36, 66, 2, 66, 2, 66, 26, 66,
  39           38, 66, 66, 66, 66, 66, 66, 36, 36, 24, 24, 0, 0, 0, 0},//--06字模--//
  40              
  41            {0, 0, 0, 0, 0, 0, 24, 126, 36, 34, 66, 34, 66, 16, 66, 16,
  42           66, 8, 66, 8, 66, 8, 66, 8, 36, 8, 24, 8, 0, 0, 0, 0},//--07字模--//
  43              
  44            {0, 0, 0, 0, 0, 0, 24, 60, 36, 66, 66, 66, 66, 66, 66, 36,
  45           66, 24, 66, 36, 66, 66, 66, 66, 36, 66, 24, 60, 0, 0, 0, 0},//--08字模--//
  46            
  47            {0, 0, 0, 0, 0, 0, 24, 24, 36, 36, 66, 66, 66, 66, 66,
  48           66, 66, 100, 66, 88, 66, 64, 66, 64, 36, 36, 24, 28, 0, 0, 0, 0},//--09字模--//  
  49          }; 
  50          //--09字模--//
  51          //uchar code tab9[] = 
  52          //{0, 0, 0, 0, 0, 0, 24, 24, 36, 36, 66, 66, 66, 66, 66,
  53          // 66, 66, 100, 66, 88, 66, 64, 66, 64, 36, 36, 24, 28, 0, 0, 0, 0} ;
  54          
C51 COMPILER V9.56.0.0   DIS                                                               01/03/2018 16:08:18 PAGE 2   

  55          //--08字模--//
  56          //uchar code tab8[] = 
  57          //{0, 0, 0, 0, 0, 0, 24, 60, 36, 66, 66, 66, 66, 66, 66, 36,
  58          //66, 24, 66, 36, 66, 66, 66, 66, 36, 66, 24, 60, 0, 0, 0, 0};
  59          
  60          //--07字模--//
  61          //uchar code tab7[] = 
  62          //{0, 0, 0, 0, 0, 0, 24, 126, 36, 34, 66, 34, 66, 16, 66, 16,
  63          // 66, 8, 66, 8, 66, 8, 66, 8, 36, 8, 24, 8, 0, 0, 0, 0};
  64          
  65          //--06字模--//
  66          //uchar code tab6[] = 
  67          //{0, 0, 0, 0, 0, 0, 24, 56, 36, 36, 66, 2, 66, 2, 66, 26, 66,
  68          // 38, 66, 66, 66, 66, 66, 66, 36, 36, 24, 24, 0, 0, 0, 0};
  69          
  70          //--05字模--//
  71          //uchar code tab5[] = 
  72          //{0, 0, 0, 0, 0, 0, 24, 126, 36, 2, 66, 2, 66, 2, 66, 26, 66,
  73          // 38, 66, 64, 66, 64, 66, 66, 36, 34, 24, 28, 0, 0, 0, 0};
  74          
  75          //--04字模--//
  76          //uchar code tab4[] = 
  77          //{0, 0, 0, 0, 0, 0, 24, 32, 36, 48, 66, 40, 66, 36, 66, 36, 66,
  78          //34, 66, 34, 66, 126, 66, 32, 36, 32, 24, 120, 0, 0, 0, 0};
  79          
  80          //--03字模--//
  81          //uchar code tab3[] = 
  82          //{0, 0, 0, 0, 0, 0, 24, 60, 36, 66, 66, 66, 66, 32, 66, 24, 66,
  83          // 32, 66, 64, 66, 64, 66, 66, 36, 34, 24, 28, 0, 0, 0, 0};
  84          
  85          //--02字模--//
  86          //uchar code tab2[] = 
  87          //{0, 0, 0, 0, 0, 0, 24, 60, 36, 66, 66, 66, 66, 66, 66, 32, 66,
  88          // 32, 66, 16, 66, 8, 66, 4, 36, 66, 24, 126, 0, 0, 0, 0};
  89          
  90          //--01字模--//
  91          //uchar code tab1[] = 
  92          //{0, 0, 0, 0, 0, 0, 24, 8, 36, 14, 66, 8, 66, 8, 66, 8, 66, 8, 66,
  93          //8, 66, 8, 66, 8, 36, 8, 24, 62, 0, 0, 0, 0};
  94          
  95          //--00字模--//
  96          //uchar code tab0[] = 
  97          //{0, 0, 0, 0, 0, 0, 24, 24, 36, 36, 66, 66, 66, 66, 66, 66, 66, 66,
  98          //66, 66, 66, 66, 66, 66, 36, 36, 24, 24, 0, 0, 0, 0};
  99          
 100          /*led点阵显示函数*/
 101          void li( uchar x ,uchar k)
 102          {
 103   1      //    while(1)
 104   1      //    {
 105   1            for(k = 0; k < 16; k++)                       //中
 106   1            {  
 107   2              HC595SendData(~tab[x][2*k +1],~tab[x][2*k],tab10[2*k],tab10[2*k + 1]);     
 108   2              HC595SendData(0xff,0xff,0,0);  //清屏
 109   2            }       
 110   1      //    }
 111   1      }
 112          
 113          /*通过595发送四个字节的数据*/
 114          void HC595SendData(  uchar BT3, uchar BT2,uchar BT1,uchar BT0)
 115          {  
 116   1        uchar i;
C51 COMPILER V9.56.0.0   DIS                                                               01/03/2018 16:08:18 PAGE 3   

 117   1        
 118   1        //--发送第一个字节--//
 119   1        for(i=0;i<8;i++)
 120   1        {
 121   2          MOSIO = BT3 >> 7 ;  //从高位到低位
 122   2          BT3 <<= 1;
 123   2      
 124   2          S_CLK = 0;
 125   2          S_CLK = 1;    
 126   2        }
 127   1      
 128   1        //--发送第一个字节--//
 129   1        for(i=0;i<8;i++)
 130   1        {
 131   2          MOSIO = BT2 >>7;    //从高位到低位
 132   2          BT2 <<= 1;
 133   2      
 134   2          S_CLK = 0;
 135   2          S_CLK = 1;  
 136   2        }
 137   1      
 138   1        //--发送第一个字节--//
 139   1        for(i=0;i<8;i++)
 140   1        {
 141   2          MOSIO = BT1 >> 7;   //从高位到低位
 142   2          BT1 <<= 1;
 143   2          S_CLK = 0;
 144   2          S_CLK = 1;  
 145   2        }
 146   1      
 147   1        //--发送第一个字节--//
 148   1        for(i=0;i<8;i++)
 149   1        {
 150   2          MOSIO = BT0 >> 7;   //从高位到低位
 151   2          BT0 <<= 1;
 152   2          S_CLK = 0;
 153   2          S_CLK = 1;
 154   2        }
 155   1         
 156   1        //--输出--//
 157   1        R_CLK = 0; //set dataline low
 158   1        R_CLK = 1; //片选
 159   1        R_CLK = 0; //set dataline low
 160   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    232    ----
   CONSTANT SIZE    =    672    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     12       6
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
